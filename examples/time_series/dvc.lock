schema: '2.0'
stages:
  prepare:
    cmd:
    - python -m deckard.layers.runner prepare
    deps:
    - path: original.csv
      md5: ae283bfbb48ca15407dca5d2423600cf
      size: 4656066
    params:
      params.yaml:
        data:
          name: original.csv
          target: carbon_intensity_avg
          sample:
            random_state: 42
            shuffle: true
            stratify: false
            time_series: true
            train_size: 8000
        files:
          data_file: data\0d2b9fab517f78660b79f4bbb7392769.pickle
          data_filetype: pickle
          data_path: data
          ground_truth_file: ground_truth.json
          model_file: model\0946b5ccd6d0eb16c442b603db474d31.pickle
          model_filetype: pickle
          model_path: model
          params_file: params.json
          path: 07376fbc332b85299463a75113350069
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        plots:
          correlation: correlation
    outs:
    - path: prepare/data\0d2b9fab517f78660b79f4bbb7392769.pickle
      md5: f3641622414823f6f30a9909aab72acc
      size: 7173750
  train:
    cmd: python -m deckard.layers.runner train
    deps:
    - path: prepare/data\0d2b9fab517f78660b79f4bbb7392769.pickle
      md5: f3641622414823f6f30a9909aab72acc
      size: 7173750
    params:
      params.yaml:
        data:
          name: original.csv
          target: carbon_intensity_avg
          sample:
            random_state: 42
            shuffle: true
            stratify: false
            time_series: true
            train_size: 8000
        files:
          data_file: data\0d2b9fab517f78660b79f4bbb7392769.pickle
          data_filetype: pickle
          data_path: data
          ground_truth_file: ground_truth.json
          model_file: model\0946b5ccd6d0eb16c442b603db474d31.pickle
          model_filetype: pickle
          model_path: model
          params_file: params.json
          path: 07376fbc332b85299463a75113350069
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        model:
          init:
            loss: squared_error
            name: sklearn.linear_model.SGDRegressor
        plots:
          correlation: correlation
        scorers:
          rmse:
            name: sklearn.metrics.mean_squared_error
    outs:
    - path: reports/train/07376fbc332b85299463a75113350069/scores.json
      md5: 08a847866bc7f3eb9dd6d4d743b47ab2
      size: 24
    - path: train/model\0946b5ccd6d0eb16c442b603db474d31.pickle
      md5: 2de1686b26fe8b41910481510904721e
      size: 5061
  preprocess:
    cmd: python ../deckard/layers/preprocess.py  -f data -b False
    deps:
    - path: ../deckard/layers/preprocess.py
      md5: fd2bf15980ef68979cada9a181873d28
      size: 2262
    - path: configs/preprocess.yml
      md5: ac4ed79e4a6b628fac4308fdd3e24210
      size: 123
    - path: data/best_train/experiment.pkl
      md5: b229f8a2ac23a1ec1a1e3d01e566413f
      size: 12562726
    outs:
    - path: data/best_preprocess/data_params.json
      md5: a8ae5a808f4f851c93e0f297f7a0a33b
      size: 134
    - path: data/best_preprocess/experiment.pkl
      md5: f2e3e02345221de875418a1fa715b6df
      size: 12560735
    - path: data/best_preprocess/model_params.json
      md5: 2d676ea30f6a4546c0c9d68244b8bb34
      size: 1530
    - path: data/best_preprocess/results.json
      md5: bdd6ee1fc95fc2cd58a7feacd791b87f
      size: 235
  featurize:
    cmd: python ../deckard/layers/featurize.py  -f data -b False
    deps:
    - path: ../deckard/layers/featurize.py
      md5: ac4fc4a980a282c57db1d67bec81be42
      size: 2245
    - path: configs/featurize.yml
      md5: 8e868a26517d7807395016a0b2f60510
      size: 128
    - path: data/best_preprocess/experiment.pkl
      md5: f2e3e02345221de875418a1fa715b6df
      size: 12560735
    outs:
    - path: data/best_features/data_params.json
      md5: a8ae5a808f4f851c93e0f297f7a0a33b
      size: 134
    - path: data/best_features/experiment.pkl
      md5: 483cfaaf1ef12d5e6a054c810cbd69a7
      size: 12564424
    - path: data/best_features/model_params.json
      md5: 869c577d13a24baf0c18d469dc955dd6
      size: 2358
    - path: data/best_features/results.json
      md5: 1138d0e34f3ce80528dd4205f10a6471
      size: 236
