schema: '2.0'
stages:
  prepare:
    cmd: python -m deckard.layers.prepare
    params:
      params.yaml:
        prepare:
          name: iris
          params:
            shuffle: true
            stratify: true
            random_state: 0
            train_size: 0.8
          data_file: data.pkl
          output_folder: .
    outs:
    - path: data.pkl
      md5: a909cdf3e4ea7e9ef4e0fe487b0849f3
      size: 4727
  train:
    cmd: python -m deckard.layers.sklearn_model --layer_name train
    deps:
    - path: data.pkl
      md5: a909cdf3e4ea7e9ef4e0fe487b0849f3
      size: 4727
    params:
      params.yaml:
        train:
          input_folder: .
          input_name: model.pickle
          output_folder: train
          output_name: model.pickle
          data_file: data.pkl
          layer_name: train
          config:
            name: sklearn.linear_model.LogisticRegression
            params:
              penalty: l2
          classifier: false
          model_type: sklearn
          is_fitted: false
    outs:
    - path: train/
      md5: d9b1e1e5fce7620c8cfb36a71a3aa982.dir
      size: 1834
      nfiles: 3
  preprocess:
    cmd: python -m deckard.layers.preprocess  --layer_name preprocess --position 0
    deps:
    - path: train/
      md5: d9b1e1e5fce7620c8cfb36a71a3aa982.dir
      size: 1834
      nfiles: 3
    params:
      params.yaml:
        preprocess:
          input_folder: train
          output_folder: preprocess
          input_name: model.pickle
          output_name: model
          data_file: data.pkl
          layer_name: preprocess
          position: 0
          config:
            name: sklearn.preprocessing.StandardScaler
            params:
              with_mean: true
              with_std: true
          classifier: false
          model_type: sklearn
          is_fitted: false
    outs:
    - path: preprocess/
      md5: 73f54c8af7a5c450130bf268f3a7f39f.dir
      size: 2307
      nfiles: 3
  featurize:
    cmd: python -m deckard.layers.preprocess --layer_name featurize --position 1
    deps:
    - path: preprocess/
      md5: 73f54c8af7a5c450130bf268f3a7f39f.dir
      size: 2307
      nfiles: 3
    params:
      params.yaml:
        featurize:
          input_folder: preprocess
          output_folder: featurize
          input_name: model
          output_name: model.pickle
          data_file: data.pkl
          layer_name: featurize
          position: 1
          config:
            name: sklearn.impute.SimpleImputer
            params:
              strategy: mean
          classifier: false
          model_type: sklearn
          is_fitted: false
    outs:
    - path: featurize/
      md5: 8b01a9aa7381a107a29c4799d6859829.dir
      size: 2578
      nfiles: 3
  visualise:
    cmd: python -m deckard.layers.visualise --layer_name visualise
    deps:
    - path: train/
      md5: d9b1e1e5fce7620c8cfb36a71a3aa982.dir
      size: 1834
      nfiles: 3
    params:
      params.yaml:
        visualise:
          input_folder: train/
          data_file: data.pkl
          data_folder: .
          model_folder: train/
          model_file: model.pickle
          defense_file: None
          preprocessor_file: None
          config:
            name:
          output_folder: plots
          root_folder: .
          model_type: sklearn
          art: false
          plot_folder: plots
    outs:
    - path: plots/
      md5: 465d80a03306fdea82bfae7b6bf90a77.dir
      size: 15742
      nfiles: 1
