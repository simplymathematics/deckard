schema: '2.0'
stages:
  prepare:
    cmd: python -m deckard.layers.prepare
    params:
      params.yaml:
        prepare.config:
          name: iris
          params:
            shuffle: true
            stratify: true
            random_state: 0
            test_size:
            train_size: 0.8
    outs:
    - path: prepare/data.pickle
      md5: 1808c6de4de0009658733446f5ae9f31
      size: 4767
  train:
    cmd: python -m deckard.layers.sklearn_model --layer_name train
    deps:
    - path: prepare/data.pickle
      md5: 1808c6de4de0009658733446f5ae9f31
      size: 4767
    params:
      params.yaml:
        train.config:
          name: sklearn.linear_model.LogisticRegression
          params:
            penalty: l2
    outs:
    - path: train/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: train/model.pickle
      md5: 0c8c061a384a7066654e2f77a536107b
      size: 828
    - path: train/predictions.json
      md5: 05eff67a9e140dc8b71930f5ae7f2dfc
      size: 241
  preprocess:
    cmd: python -m deckard.layers.preprocess --layer_name preprocess --position 0
    deps:
    - path: prepare/data.pickle
      md5: 1808c6de4de0009658733446f5ae9f31
      size: 4767
    - path: train/model.pickle
      md5: 0c8c061a384a7066654e2f77a536107b
      size: 828
    params:
      params.yaml:
        preprocess.config:
          name: sklearn.preprocessing.StandardScaler
          params:
            with_mean: true
            with_std: true
    outs:
    - path: preprocess/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: preprocess/model.pickle
      md5: 63944c1a7a16b20d3071df0c87610454
      size: 1301
    - path: preprocess/predictions.json
      md5: 5415951dfc438a504731a043f666c697
      size: 241
  featurize:
    cmd: python -m deckard.layers.preprocess --layer_name featurize --position 1
    deps:
    - path: prepare/data.pickle
      md5: 1808c6de4de0009658733446f5ae9f31
      size: 4767
    - path: preprocess/model.pickle
      md5: 63944c1a7a16b20d3071df0c87610454
      size: 1301
    params:
      params.yaml:
        featurize.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: featurize/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: featurize/model.pickle
      md5: ea839209b05ab4e066fb3b5e202d7a2b
      size: 1572
    - path: featurize/predictions.json
      md5: 5415951dfc438a504731a043f666c697
      size: 241
  art_model:
    cmd: python -m deckard.layers.art_model --layer_name art_model
    deps:
    - path: prepare/data.pickle
      md5: 1808c6de4de0009658733446f5ae9f31
      size: 4767
    - path: train/model.pickle
      md5: 0c8c061a384a7066654e2f77a536107b
      size: 828
    params:
      params.yaml:
        train.config:
          name: sklearn.linear_model.LogisticRegression
          params:
            penalty: l2
    outs:
    - path: art_model/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: art_model/model.pickle
      md5: ea839209b05ab4e066fb3b5e202d7a2b
      size: 1572
    - path: art_model/predictions.json
      md5: 3e744e084c19133365f73f7236ef3bcc
      size: 1582
  defend:
    cmd: python -m deckard.layers.defend --layer_name defend
    deps:
    - path: prepare/data.pickle
      md5: 1808c6de4de0009658733446f5ae9f31
      size: 4767
    - path: train/model.pickle
      md5: 0c8c061a384a7066654e2f77a536107b
      size: 828
    params:
      params.yaml:
        defend.config:
          name: art.defences.preprocessor.FeatureSqueezing
          params:
            bit_depth: 8
    outs:
    - path: defend/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: defend/model.pickle
      md5: 8a66b6cc9622f2d4f14ef50d65d015f3
      size: 1606
    - path: defend/predictions.json
      md5: 4bb3f309c2f613de1ef623e5609cad08
      size: 1584
  attack:
    cmd: python -m deckard.layers.attack --layer_name attack
    deps:
    - path: defend/model.pickle
      md5: 8a66b6cc9622f2d4f14ef50d65d015f3
      size: 1606
    - path: prepare/data.pickle
      md5: 1808c6de4de0009658733446f5ae9f31
      size: 4767
    params:
      params.yaml:
        attack.config:
          name: art.attacks.evasion.HopSkipJump
          params:
            max_iter: 100
    outs:
    - path: attack/ground_truth.json
      md5: d751713988987e9331980363e24189ce
      size: 2
    - path: attack/predictions.json
      md5: 53dd79bb508ff453a09b8a3cd42b8953
      size: 1597
  visualise:
    cmd: python -m deckard.layers.visualise --layer_name visualise
    deps:
    - path: prepare/data.pickle
      md5: 1808c6de4de0009658733446f5ae9f31
      size: 4767
    - path: train/model.pickle
      md5: 0c8c061a384a7066654e2f77a536107b
      size: 828
    params:
      params.yaml:
        visualise.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: ./ROC_AUC.pdf
      md5: 1d8bbf4e9fbec04d1c7c4b1ccc95ee21
      size: 15163
  evaluate:
    cmd: python -m deckard.layers.evaluate --layer_name evaluate
    deps:
    - path: art_model
      md5: 420aa04e7ad94124141f8a65216211f0.dir
      size: 4461
      nfiles: 7
    - path: attack
      md5: 634d875e4d733ca2ad038c37558591b0.dir
      size: 5669
      nfiles: 10
    - path: defend
      md5: a508a7edbe8b246fd4ba6e9a4660f437.dir
      size: 4673
      nfiles: 7
    - path: featurize
      md5: 3381909d464637f003d180e459f6649f.dir
      size: 3168
      nfiles: 7
    - path: prepare
      md5: 3e03de7c3b8508eeb718426bee49699b.dir
      size: 4767
      nfiles: 1
    - path: preprocess
      md5: c92c6f2a2c0b049f1d12048564c58b95.dir
      size: 2817
      nfiles: 7
    - path: train
      md5: 9525172fb1f317f1bf8306bfc61b611d.dir
      size: 2355
      nfiles: 7
    params:
      params.yaml:
        evaluate.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: evaluate/scores.json
      md5: 60af34acecc898c488a85143747b8537
      size: 324
