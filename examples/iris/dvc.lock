schema: '2.0'
stages:
  prepare:
    cmd: python -m deckard.layers.prepare
    params:
      params.yaml:
        prepare.config:
          name: iris
          params:
            shuffle: true
            stratify: true
            random_state: 0
            test_size:
            train_size: 0.8
    outs:
    - path: prepare/data.pickle
      md5: 07a1acfdef6c728ea1381577e4eaa39c
      size: 4767
  train:
    cmd: python -m deckard.layers.sklearn_model --layer_name train
    deps:
    - path: prepare/data.pickle
      md5: 07a1acfdef6c728ea1381577e4eaa39c
      size: 4767
    params:
      params.yaml:
        train.config:
          name: sklearn.linear_model.LogisticRegression
          params:
            penalty: l2
    outs:
    - path: train/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: train/model.pickle
      md5: 2522cf93089c0eeddbfdb68c9e63ecca
      size: 828
    - path: train/predictions.json
      md5: fb7ff579346cb75f1ec5ded1baf6491a
      size: 241
  preprocess:
    cmd: python -m deckard.layers.preprocess --layer_name preprocess --position 0
    deps:
    - path: prepare/data.pickle
      md5: 07a1acfdef6c728ea1381577e4eaa39c
      size: 4767
    - path: train/model.pickle
      md5: 2522cf93089c0eeddbfdb68c9e63ecca
      size: 828
    params:
      params.yaml:
        preprocess.config:
          name: sklearn.preprocessing.StandardScaler
          params:
            with_mean: true
            with_std: true
    outs:
    - path: preprocess/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: preprocess/model.pickle
      md5: a732e0870371fed42fdf795d175e31f7
      size: 1301
    - path: preprocess/predictions.json
      md5: db0d619115d3f42297d481713cbb7bf6
      size: 241
  featurize:
    cmd: python -m deckard.layers.preprocess --layer_name featurize --position 1
    deps:
    - path: prepare/data.pickle
      md5: 07a1acfdef6c728ea1381577e4eaa39c
      size: 4767
    - path: preprocess/model.pickle
      md5: a732e0870371fed42fdf795d175e31f7
      size: 1301
    params:
      params.yaml:
        featurize.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: featurize/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: featurize/model.pickle
      md5: de9c1b482e470bb9ae8870279fe3c1d4
      size: 1572
    - path: featurize/predictions.json
      md5: db0d619115d3f42297d481713cbb7bf6
      size: 241
  art_model:
    cmd: python -m deckard.layers.art_model --layer_name art_model
    deps:
    - path: prepare/data.pickle
      md5: 07a1acfdef6c728ea1381577e4eaa39c
      size: 4767
    - path: train/model.pickle
      md5: 2522cf93089c0eeddbfdb68c9e63ecca
      size: 828
    params:
      params.yaml:
        train.config:
          name: sklearn.linear_model.LogisticRegression
          params:
            penalty: l2
    outs:
    - path: art_model/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: art_model/model.pickle
      md5: de9c1b482e470bb9ae8870279fe3c1d4
      size: 1572
    - path: art_model/predictions.json
      md5: a4f4bd3e0f6f35626f42dc9626c0bbe6
      size: 1584
  defend:
    cmd: python -m deckard.layers.defend --layer_name defend
    deps:
    - path: prepare/data.pickle
      md5: 07a1acfdef6c728ea1381577e4eaa39c
      size: 4767
    - path: train/model.pickle
      md5: 2522cf93089c0eeddbfdb68c9e63ecca
      size: 828
    params:
      params.yaml:
        defend.config:
          name: art.defences.preprocessor.FeatureSqueezing
          params:
            bit_depth: 8
    outs:
    - path: defend/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: defend/model.pickle
      md5: 21a1821185164db0da509d9febf235ec
      size: 1606
    - path: defend/predictions.json
      md5: 580f675c409586758e2a7b57d1dbb268
      size: 1582
  attack:
    cmd: python -m deckard.layers.attack --layer_name attack
    deps:
    - path: defend/model.pickle
      md5: 21a1821185164db0da509d9febf235ec
      size: 1606
    - path: prepare/data.pickle
      md5: 07a1acfdef6c728ea1381577e4eaa39c
      size: 4767
    params:
      params.yaml:
        attack.config:
          name: art.attacks.evasion.HopSkipJump
          params:
            max_iter: 100
    outs:
    - path: attack/ground_truth.json
      md5: d751713988987e9331980363e24189ce
      size: 2
    - path: attack/predictions.json
      md5: 9d06fb875506bedc96448466b7c08066
      size: 1595
  visualise:
    cmd: python -m deckard.layers.visualise --layer_name visualise
    deps:
    - path: prepare/data.pickle
      md5: 07a1acfdef6c728ea1381577e4eaa39c
      size: 4767
    - path: train/model.pickle
      md5: 2522cf93089c0eeddbfdb68c9e63ecca
      size: 828
    params:
      params.yaml:
        visualise.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: ./ROC_AUC.pdf
      md5: eda14fcac5279e696ede84b9246eb1b6
      size: 15719
  evaluate:
    cmd: python -m deckard.layers.evaluate --layer_name evaluate
    deps:
    - path: art_model
      md5: 1084046585edc4dc5470d3ce44a12940.dir
      size: 4446
      nfiles: 8
    - path: attack
      md5: e90b9d4907545dd7613cba3232b326f7.dir
      size: 5625
      nfiles: 10
    - path: defend
      md5: c122615402ada5a9a3b3060521587187.dir
      size: 4637
      nfiles: 8
    - path: featurize
      md5: 9924c866f21c204a8da5b062707e32a5.dir
      size: 3150
      nfiles: 8
    - path: prepare
      md5: 374f8ca3fd44140b926db0f21f8f4200.dir
      size: 4767
      nfiles: 1
    - path: preprocess
      md5: 5e8a7cd0cc36aae821fa1ff86dac79ac.dir
      size: 2799
      nfiles: 8
    - path: train
      md5: eb7535c9e095c1c919388cf710ae4ee6.dir
      size: 2338
      nfiles: 8
    params:
      params.yaml:
        evaluate.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: evaluate/scores.json
      md5: 708bbd8f43f0a263414e783795c9ab50
      size: 324
