schema: '2.0'
stages:
  prepare:
    cmd: python -m deckard.layers.prepare
    params:
      params.yaml:
        prepare.config:
          name: iris
          params:
            shuffle: true
            stratify: true
            random_state: 0
            test_size:
            train_size: 0.8
    outs:
    - path: prepare/data.pickle
      md5: b8511366804a6f3252714c6495af9b1e
      size: 4767
  train:
    cmd: python -m deckard.layers.sklearn_model --layer_name train
    deps:
    - path: prepare/data.pickle
      md5: b8511366804a6f3252714c6495af9b1e
      size: 4767
    params:
      params.yaml:
        train.config:
          name: sklearn.linear_model.LogisticRegression
          params:
            penalty: l2
    outs:
    - path: train/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: train/model.pickle
      md5: 2a17794a908a3cdf93388d0a199c034a
      size: 828
    - path: train/predictions.json
      md5: 958188d09b59c41489ebdeaaabf343c8
      size: 1584
  preprocess:
    cmd: python -m deckard.layers.preprocess --layer_name preprocess --position 0
    deps:
    - path: prepare/data.pickle
      md5: b8511366804a6f3252714c6495af9b1e
      size: 4767
    - path: train/model.pickle
      md5: 2a17794a908a3cdf93388d0a199c034a
      size: 828
    params:
      params.yaml:
        preprocess.config:
          name: sklearn.preprocessing.StandardScaler
          params:
            with_mean: true
            with_std: true
    outs:
    - path: preprocess/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: preprocess/model.pickle
      md5: b6ed496b5aa5d96c8e55aa37045d15cf
      size: 1301
    - path: preprocess/predictions.json
      md5: dcf3c8aa96281fb9c07b79ba196c102b
      size: 1580
  featurize:
    cmd: python -m deckard.layers.preprocess --layer_name featurize --position 1
    deps:
    - path: prepare/data.pickle
      md5: b8511366804a6f3252714c6495af9b1e
      size: 4767
    - path: preprocess/model.pickle
      md5: b6ed496b5aa5d96c8e55aa37045d15cf
      size: 1301
    params:
      params.yaml:
        featurize.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: featurize/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: featurize/model.pickle
      md5: fa03cac3b286e24c76a8e5e57899149e
      size: 1572
    - path: featurize/predictions.json
      md5: dcf3c8aa96281fb9c07b79ba196c102b
      size: 1580
  art_model:
    cmd: python -m deckard.layers.art_model --layer_name art_model
    deps:
    - path: prepare/data.pickle
      md5: b8511366804a6f3252714c6495af9b1e
      size: 4767
    - path: train/model.pickle
      md5: 2a17794a908a3cdf93388d0a199c034a
      size: 828
    params:
      params.yaml:
        train.config:
          name: sklearn.linear_model.LogisticRegression
          params:
            penalty: l2
    outs:
    - path: art_model/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: art_model/model.pickle
      md5: fa03cac3b286e24c76a8e5e57899149e
      size: 1572
    - path: art_model/predictions.json
      md5: dcf3c8aa96281fb9c07b79ba196c102b
      size: 1580
  defend:
    cmd: python -m deckard.layers.defend --layer_name defend
    deps:
    - path: prepare/data.pickle
      md5: b8511366804a6f3252714c6495af9b1e
      size: 4767
    - path: train/model.pickle
      md5: 2a17794a908a3cdf93388d0a199c034a
      size: 828
    params:
      params.yaml:
        defend.config:
          name: art.defences.preprocessor.FeatureSqueezing
          params:
            bit_depth: 8
    outs:
    - path: defend/ground_truth.json
      md5: 4e3ac1e5974ad292654fbf0aaae3d779
      size: 781
    - path: defend/model.pickle
      md5: 6e0732c843c2ece482975f24ef570373
      size: 1606
    - path: defend/predictions.json
      md5: bfb57128a4eeee6a46a70aeb90b37f29
      size: 1582
  attack:
    cmd: python -m deckard.layers.attack --layer_name attack
    deps:
    - path: defend/model.pickle
      md5: 6e0732c843c2ece482975f24ef570373
      size: 1606
    - path: prepare/data.pickle
      md5: b8511366804a6f3252714c6495af9b1e
      size: 4767
    params:
      params.yaml:
        attack.config:
          name: art.attacks.evasion.HopSkipJump
          params:
            max_iter: 100
    outs:
    - path: attack/ground_truth.json
      md5: d751713988987e9331980363e24189ce
      size: 2
    - path: attack/predictions.json
      md5: e1aa7b6d6519e96941d1550b149634ea
      size: 1597
  visualise:
    cmd: python -m deckard.layers.visualise --layer_name visualise
    deps:
    - path: prepare/data.pickle
      md5: b8511366804a6f3252714c6495af9b1e
      size: 4767
    - path: train/model.pickle
      md5: 2a17794a908a3cdf93388d0a199c034a
      size: 828
    params:
      params.yaml:
        visualise.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: ./ROC_AUC.pdf
      md5: a5a9d9517b2becf8f690fe3d123a70e4
      size: 15709
  evaluate:
    cmd: python -m deckard.layers.evaluate --layer_name evaluate
    deps:
    - path: art_model
      md5: ce6b5ce2da757c2e4bb4f7a667790c14.dir
      size: 4459
      nfiles: 8
    - path: attack
      md5: 47e9279827a4ad2e33046789438a050e.dir
      size: 23807
      nfiles: 10
    - path: defend
      md5: c161be70ebcb8cf87257ce3aa72a8d78.dir
      size: 5510
      nfiles: 8
    - path: featurize
      md5: 61e5ef9f5998c08b83fa7ec9e5c76851.dir
      size: 10714
      nfiles: 8
    - path: prepare
      md5: edfac374b30a5f558b4c3eb8361f6795.dir
      size: 4767
      nfiles: 1
    - path: preprocess
      md5: 4e824696cb56057f3ddc4192e8a5f41a.dir
      size: 7045
      nfiles: 8
    - path: train
      md5: b9c3f06348bd8b19173f350490ccf3ab.dir
      size: 6630
      nfiles: 8
    params:
      params.yaml:
        evaluate.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: evaluate/scores.json
      md5: 39d3727687ed48f0379c9c61210ef46e
      size: 324
