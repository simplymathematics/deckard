schema: '2.0'
stages:
  prepare:
    cmd: python -m deckard.layers.prepare
    params:
      params.yaml:
        prepare.config:
          name: iris
          params:
            shuffle: true
            stratify: true
            random_state: 0
            test_size:
            train_size: 0.8
    outs:
    - path: prepare/data.pickle
      md5: 3c6457147be8914a82e926674e0e5e0d
      size: 4767
  train:
    cmd: python -m deckard.layers.sklearn_model --layer_name train
    deps:
    - path: prepare/data.pickle
      md5: 3c6457147be8914a82e926674e0e5e0d
      size: 4767
    params:
      params.yaml:
        train.config:
          name: sklearn.linear_model.LogisticRegression
          params:
            penalty: l2
    outs:
    - path: train/ground_truth.json
      md5: ebd226610027480795b3ad51a79f3e20
      size: 799
    - path: train/model.pickle
      md5: c353c8f363a8e7de95ead460080ff22b
      size: 828
    - path: train/predictions.json
      md5: 251ee21d2e517e89dba1bbad9a1b2671
      size: 207
  preprocess:
    cmd: python -m deckard.layers.preprocess --layer_name preprocess --position 0
    deps:
    - path: prepare/data.pickle
      md5: 3c6457147be8914a82e926674e0e5e0d
      size: 4767
    - path: train/model.pickle
      md5: c353c8f363a8e7de95ead460080ff22b
      size: 828
    params:
      params.yaml:
        preprocess.config:
          name: sklearn.preprocessing.StandardScaler
          params:
            with_mean: true
            with_std: true
    outs:
    - path: preprocess/ground_truth.json
      md5: ebd226610027480795b3ad51a79f3e20
      size: 799
    - path: preprocess/model.pickle
      md5: 160193048504736e617cfa4ad798f713
      size: 1301
    - path: preprocess/predictions.json
      md5: a97ee7826452f0bcf4013f7943a7bd2f
      size: 207
  featurize:
    cmd: python -m deckard.layers.preprocess --layer_name featurize --position 1
    deps:
    - path: prepare/data.pickle
      md5: 3c6457147be8914a82e926674e0e5e0d
      size: 4767
    - path: preprocess/model.pickle
      md5: 160193048504736e617cfa4ad798f713
      size: 1301
    params:
      params.yaml:
        featurize.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: featurize/ground_truth.json
      md5: ebd226610027480795b3ad51a79f3e20
      size: 799
    - path: featurize/model.pickle
      md5: eef07d00031972bc232cbd36732bb002
      size: 1572
    - path: featurize/predictions.json
      md5: a97ee7826452f0bcf4013f7943a7bd2f
      size: 207
  art_model:
    cmd: python -m deckard.layers.art_model --layer_name art_model
    deps:
    - path: prepare/data.pickle
      md5: 3c6457147be8914a82e926674e0e5e0d
      size: 4767
    - path: train/model.pickle
      md5: c353c8f363a8e7de95ead460080ff22b
      size: 828
    params:
      params.yaml:
        train.config:
          name: sklearn.linear_model.LogisticRegression
          params:
            penalty: l2
    outs:
    - path: art_model/ground_truth.json
      md5: ebd226610027480795b3ad51a79f3e20
      size: 799
    - path: art_model/model.pickle
      md5: 8b809213c25184de9cc70d84ae81b824
      size: 1572
    - path: art_model/predictions.json
      md5: e0daf5177600f9176c4698a99e290888
      size: 1602
  defend:
    cmd: python -m deckard.layers.defend --layer_name defend
    deps:
    - path: prepare/data.pickle
      md5: 3c6457147be8914a82e926674e0e5e0d
      size: 4767
    - path: train/model.pickle
      md5: c353c8f363a8e7de95ead460080ff22b
      size: 828
    params:
      params.yaml:
        defend.config:
          name: art.defences.preprocessor.FeatureSqueezing
          params:
            bit_depth: 8
    outs:
    - path: defend/ground_truth.json
      md5: ebd226610027480795b3ad51a79f3e20
      size: 799
    - path: defend/model.pickle
      md5: 3954e3bf70d5f1f1ca7676189f66e029
      size: 1606
    - path: defend/predictions.json
      md5: 71089d45a7b13979ad39d6e467ffb499
      size: 1604
  attack:
    cmd: python -m deckard.layers.attack --layer_name attack
    deps:
    - path: prepare/data.pickle
      md5: 3c6457147be8914a82e926674e0e5e0d
      size: 4767
    - path: train/model.pickle
      md5: c353c8f363a8e7de95ead460080ff22b
      size: 828
    params:
      params.yaml:
        attack.config:
          name: art.attacks.evasion.HopSkipJump
          params:
            max_iter: 100
    outs:
    - path: attack/ground_truth.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: attack/predictions.json
      md5: 5e710aee700170563478f8f2e29f2374
      size: 1599
  visualise:
    cmd: python -m deckard.layers.visualise --layer_name visualise
    deps:
    - path: prepare/data.pickle
      md5: 3c6457147be8914a82e926674e0e5e0d
      size: 4767
    - path: train/model.pickle
      md5: c353c8f363a8e7de95ead460080ff22b
      size: 828
    params:
      params.yaml:
        visualise.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: ./ROC_AUC.pdf
      md5: 6923565c7b36885ac0e76618dab1b67e
      size: 15186
  evaluate:
    cmd: python -m deckard.layers.evaluate --layer_name evaluate
    deps:
    - path: art_model
      md5: f34dc01c4ed50bb8d4d6e159d0e7d317.dir
      size: 3973
      nfiles: 3
    - path: attack
      md5: 56ecfb87131c001d3ab55afc57cc6c01.dir
      size: 4184
      nfiles: 5
    - path: defend
      md5: 0a560549f7877f6b4ab67860a2a07b95.dir
      size: 4009
      nfiles: 3
    - path: featurize
      md5: 95f9e444be8bc99f26540613e96837c0.dir
      size: 2578
      nfiles: 3
    - path: prepare
      md5: 7e658d14211c15454ff499f299bb7ca7.dir
      size: 4767
      nfiles: 1
    - path: preprocess
      md5: 29b0fdf2a2f61d946863f6e5fbc9f0d5.dir
      size: 2307
      nfiles: 3
    - path: train
      md5: 33358942f28f4492a9232ed2f577792b.dir
      size: 2557
      nfiles: 5
    params:
      params.yaml:
        evaluate.config:
          name: sklearn.impute.SimpleImputer
          params:
            strategy: mean
    outs:
    - path: evaluate/scores.json
      md5: 374b433c94fdd54eb8b0b150d03611af
      size: 324
