vars:
  data_file  : "data.pickle"
  model_file : "model.pickle"
  predictions_file : "predictions.json"
  ground_truth_file : "ground_truth.json"
  scores_file : "scores.json"
  params_file : "params.json"
  plot_file : "plot.pdf"
  

prepare:
  config:
    name: 'iris'
    params:
      shuffle : True
      stratify : True
      random_state : 0
      test_size : 
      train_size : .8
  outputs:
    folder : prepare
    file : data.pickle
    predictions : 
    ground_truth : 
  scores:
    file: 
    folder: 
    time_dict: 
  plots:
    file:
    folder:
train:
  inputs:
    folder : prepare
    data : data.pickle
    type : 'sklearn'
    classifier : True
    is_fitted : True
    model: 
  config : 
    name: sklearn.linear_model.LogisticRegression
    params: 
      'penalty' : 'l2'
  outputs:
    folder : train
    model : "model.pickle"
    ground_truth : "ground_truth.json"
    predictions : "predictions.json"
  metrics:
    scores : params.scores_file
preprocess:
  inputs:
    folder : "."
    data : prepare/data.pickle
    type : 'sklearn'
    classifier : True
    is_fitted : True
    position : 0
    model: train/model.pickle
  config : 
    name: sklearn.preprocessing.StandardScaler
    params: 
      'with_mean' : True
      'with_std' : True
  outputs:
    folder : "preprocess"
    model : "model.pickle"
    params : "params.json"
    ground_truth : "ground_truth.json"
    predictions : "predictions.json"
  metrics:
    scores : "scores.json"
featurize:
  inputs:
    folder : "."
    data : prepare/data.pickle
    type : 'sklearn'
    classifier : True
    is_fitted : True
    position : 1
    model: preprocess/model.pickle
  config : 
    name: sklearn.impute.SimpleImputer
    params: 
      'strategy' : 'mean'
  outputs:
    folder : featurize
    model : "model.pickle"
    params : "params.json"
    ground_truth : "ground_truth.json"
    predictions : "predictions.json"
  metrics:
    scores : "scores.json"
art_model:
  inputs:
    folder : "."
    data : prepare/data.pickle
    type : 'sklearn'
    classifier : True
    is_fitted : True
    model: featurize/model.pickle
  outputs:
    folder : "art_model"
    model : "model.pickle"
    params : "params.json"
    ground_truth : "ground_truth.json"
    predictions : "predictions.json"
  metrics:
    scores : "scores.json"
defend:
  inputs:
    folder : "."
    data : prepare/data.pickle
    type : 'sklearn'
    classifier : True
    is_fitted : False
    model: art_model/model.pickle
  config : 
    name: art.defences.preprocessor.FeatureSqueezing
    params: 
      'bit_depth' : 8
  outputs:
    folder : "defend"
    model : "model.pickle"
    params : "params.json"
    ground_truth : "ground_truth.json"
    predictions : "predictions.json"
  metrics:
    scores : "defend_scores.json"
attack:
  inputs:
    folder : "."
    data : prepare/data.pickle
    type : 'sklearn'
    classifier : True
    is_fitted : True
    model: defend/model.pickle
  config : 
    name:  art.attacks.evasion.HopSkipJump
    params: 
      max_iter : 100
  outputs:
    folder : "attack"
    model : "model.pickle"
    params : "params.json"
    ground_truth : "ground_truth.json"
    predictions : "predictions.json"
  metrics:
    scores : "scores.json"
evaluate:
  inputs:
    folder : train
    ground_truth : "predictions.json"
    predictions : 'ground_truth.json'
    classifier : True
    recursive : True
  config : 
    name: sklearn.impute.SimpleImputer
    params: 
      'strategy' : 'mean'
  outputs:
    folder : "evaluate"
    model : "model.pickle"
    params : "params.json"
  metrics:
    scores : "scores.json"
visualise:
  inputs:
    folder : "."
    data : prepare/data.pickle
    type : 'sklearn'
    art : False
    classifier : True
    is_fitted : True
    model: defend/model.pickle
  config : 
    name: sklearn.impute.SimpleImputer
    params: 
      'strategy' : 'mean'
  outputs:
    folder : "."
  plots:
    roc_auc: "ROC_AUC.pdf"
