schema: '2.0'
stages:
  merge@cifar100:
    cmd: python merge.py  --big_dir data/bit_depth/cifar100 --little_dir data/cifar100
      --config ../conf/afr.yaml --data_file power.csv --output_folder cifar100/ --output_file
      merged.csv
    deps:
    - path: ../conf/clean.yaml
      hash: md5
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 513
    - path: data/bit_depth/cifar100/power.csv
      md5: d52080413e3ba7bd86ef8d92ebd00507
      size: 3987447
    - path: data/cifar100/power.csv
      md5: f51f0d4ebd105f64829af90a0212de00
      size: 16081846
    params:
      ../conf/clean.yaml:
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
    outs:
    - path: cifar100/merged.csv
      hash: md5
      md5: f2bf33451a3c6a27e8b37dafc2a30ace
      size: 20099761
  clean@cifar100:
    cmd: python -m deckard.layers.clean_data --i cifar100/merged.csv --o cifar100/clean.csv
      --config "../conf/clean.yaml"
    deps:
    - path: ../conf/clean.yaml
      hash: md5
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 513
    - path: cifar100/merged.csv
      hash: md5
      md5: f2bf33451a3c6a27e8b37dafc2a30ace
      size: 20099761
    params:
      ../conf/clean.yaml:
        attacks:
          FastGradientMethod: FGM
          ProjectedGradientDescent: PGD
          HopSkipJump: HSJ
          DeepFool: Deep
        defences:
          Control: Control
          FeatureSqueezing: FSQ
          Epochs: Epochs
          model_layers: Control
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
        params:
          FGM: attack.init.eps
          PGD: attack.init.eps
          HSJ: attack.init.eps
          DeepFool: attack.init.eps
          FSQ: model.art.preprocessor.bit_depth
          Control: model_layers
          Epochs: model.trainer.nb_epoch
          Batch_Size: model.trainer.batch_size
    outs:
    - path: cifar100/clean.csv
      hash: md5
      md5: 57d972137d581f726c30f609f6e3dc16
      size: 9316351
  afr@cifar100:
    cmd: python -m deckard.layers.afr --dataset cifar100 --data_file cifar100/clean.csv
      --config_file "../conf/afr.yaml" --plots_folder cifar100/ --target adv_failures
      --duration_col adv_fit_time
    deps:
    - path: ../conf/afr.yaml
      hash: md5
      md5: cc0a815c8f97762789aa866cbca965a1
      size: 4839
    - path: cifar100/clean.csv
      hash: md5
      md5: 57d972137d581f726c30f609f6e3dc16
      size: 9316351
    outs:
    - path: cifar100/aft_comparison.csv
      hash: md5
      md5: 5df60e191c8da12d2a224fb299a8f0db
      size: 224
    - path: cifar100/aft_comparison.tex
      hash: md5
      md5: 6a21266cae4f876b44b3bc0eac7e73ff
      size: 470
    - path: cifar100/cox_aft.pdf
      hash: md5
      md5: 1135221b31492d73b65f19f8dac19fc7
      size: 27631
    - path: cifar100/cox_epochs_partial_effect.pdf
      hash: md5
      md5: 3d169a64f76c4cfdb4d2c7fb77c205e8
      size: 33262
    - path: cifar100/log_logistic_aft.pdf
      hash: md5
      md5: 676bbd4550f7a2f09e57980e8025b6ea
      size: 29560
    - path: cifar100/log_logistic_epochs_partial_effect.pdf
      hash: md5
      md5: e1bb804c6da3ce3a4b20f9c2c960b18f
      size: 27111
    - path: cifar100/log_normal_aft.pdf
      hash: md5
      md5: 35f5f31f3d5338392a485026ee4b0e52
      size: 31423
    - path: cifar100/log_normal_epochs_partial_effect.pdf
      hash: md5
      md5: d7d027d1076c26fa9c2489faeed748ff
      size: 27996
    - path: cifar100/weibull_aft.pdf
      hash: md5
      md5: d6e23df7479cb6dc9ac2e1826cbcff9f
      size: 35343
    - path: cifar100/weibull_epochs_partial_effect.pdf
      hash: md5
      md5: 1a3b1b9a70d59590f2e1fe8a29575590
      size: 27984
  merge@cifar:
    cmd: python merge.py  --big_dir data/bit_depth/cifar --little_dir data/cifar --config
      ../conf/afr.yaml --data_file power.csv --output_folder cifar/ --output_file
      merged.csv
    deps:
    - path: ../conf/clean.yaml
      hash: md5
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 513
    - path: data/bit_depth/cifar/power.csv
      md5: b9ebbe01b2bd93f1c4af02fb8abd910b
      size: 5291011
    - path: data/cifar/power.csv
      md5: a8e056a8c4008ce37006237f2e44b2bf
      size: 9997291
    params:
      ../conf/clean.yaml:
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
    outs:
    - path: cifar/merged.csv
      hash: md5
      md5: 2d2cbcb913a61d304950c910bd487b9b
      size: 15304603
  merge@mnist:
    cmd: python merge.py  --big_dir data/bit_depth/mnist --little_dir data/mnist --config
      ../conf/afr.yaml --data_file power.csv --output_folder mnist/ --output_file
      merged.csv
    deps:
    - path: ../conf/clean.yaml
      hash: md5
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 513
    - path: data/bit_depth/mnist/power.csv
      md5: ed40bca679961759527ca94ca4cbd984
      size: 5421537
    - path: data/mnist/power.csv
      md5: 6c84e8e91d81504e86db933bab0e9ae2
      size: 9968081
    params:
      ../conf/clean.yaml:
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
    outs:
    - path: mnist/merged.csv
      hash: md5
      md5: 8f227012f75f50d6f01745b54d2dc5a5
      size: 15408533
  clean@mnist:
    cmd: python -m deckard.layers.clean_data --i mnist/merged.csv --o mnist/clean.csv
      --config "../conf/clean.yaml"
    deps:
    - path: ../conf/clean.yaml
      hash: md5
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 513
    - path: mnist/merged.csv
      hash: md5
      md5: 8f227012f75f50d6f01745b54d2dc5a5
      size: 15408533
    params:
      ../conf/clean.yaml:
        attacks:
          FastGradientMethod: FGM
          ProjectedGradientDescent: PGD
          HopSkipJump: HSJ
          DeepFool: Deep
        defences:
          Control: Control
          FeatureSqueezing: FSQ
          Epochs: Epochs
          model_layers: Control
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
        params:
          FGM: attack.init.eps
          PGD: attack.init.eps
          HSJ: attack.init.eps
          DeepFool: attack.init.eps
          FSQ: model.art.preprocessor.bit_depth
          Control: model_layers
          Epochs: model.trainer.nb_epoch
          Batch_Size: model.trainer.batch_size
    outs:
    - path: mnist/clean.csv
      hash: md5
      md5: 6d39faeafde4c9f3c7c1cca0f3dac5a8
      size: 9292855
  afr@mnist:
    cmd: python -m deckard.layers.afr --dataset mnist --data_file mnist/clean.csv
      --config_file "../conf/afr.yaml" --plots_folder mnist/ --target adv_failures
      --duration_col adv_fit_time
    deps:
    - path: ../conf/afr.yaml
      hash: md5
      md5: cc0a815c8f97762789aa866cbca965a1
      size: 4839
    - path: mnist/clean.csv
      hash: md5
      md5: 6d39faeafde4c9f3c7c1cca0f3dac5a8
      size: 9292855
    outs:
    - path: mnist/aft_comparison.csv
      hash: md5
      md5: f6c6d23811cfb68f894917dde8cce8ba
      size: 220
    - path: mnist/aft_comparison.tex
      hash: md5
      md5: f95f52e6df32b89129c91de5d376d6cf
      size: 464
    - path: mnist/cox_aft.pdf
      hash: md5
      md5: da445e9b9c5f32d15153fa294dc46528
      size: 28006
    - path: mnist/cox_epochs_partial_effect.pdf
      hash: md5
      md5: 988a8c31502c34d74b714fe5c959795f
      size: 32663
    - path: mnist/log_logistic_aft.pdf
      hash: md5
      md5: 92e330ed25eaa9371e59a8e98ce25987
      size: 29570
    - path: mnist/log_logistic_epochs_partial_effect.pdf
      hash: md5
      md5: 066a2eb16b82e38f836b5fb1db474022
      size: 27213
    - path: mnist/log_normal_aft.pdf
      hash: md5
      md5: c8bd5a0c387d9a2c77b7528e77177277
      size: 31422
    - path: mnist/log_normal_epochs_partial_effect.pdf
      hash: md5
      md5: 0e8d2d6dad4a8687c28b6854c844bcd8
      size: 28114
    - path: mnist/weibull_aft.pdf
      hash: md5
      md5: f3223a30db658107b918a4a46ff2dd5f
      size: 35714
    - path: mnist/weibull_epochs_partial_effect.pdf
      hash: md5
      md5: 158e04dbc851c3b98dc35ced99af5653
      size: 26912
  clean@cifar:
    cmd: python -m deckard.layers.clean_data --i cifar/merged.csv --o cifar/clean.csv
      --config "../conf/clean.yaml"
    deps:
    - path: ../conf/clean.yaml
      hash: md5
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 513
    - path: cifar/merged.csv
      hash: md5
      md5: 2d2cbcb913a61d304950c910bd487b9b
      size: 15304603
    params:
      ../conf/clean.yaml:
        attacks:
          FastGradientMethod: FGM
          ProjectedGradientDescent: PGD
          HopSkipJump: HSJ
          DeepFool: Deep
        defences:
          Control: Control
          FeatureSqueezing: FSQ
          Epochs: Epochs
          model_layers: Control
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
        params:
          FGM: attack.init.eps
          PGD: attack.init.eps
          HSJ: attack.init.eps
          DeepFool: attack.init.eps
          FSQ: model.art.preprocessor.bit_depth
          Control: model_layers
          Epochs: model.trainer.nb_epoch
          Batch_Size: model.trainer.batch_size
    outs:
    - path: cifar/clean.csv
      hash: md5
      md5: f11065790fb385b9ca6ab6a21bcb8ec2
      size: 9303640
  afr@cifar:
    cmd: python -m deckard.layers.afr --dataset cifar --data_file cifar/clean.csv
      --config_file "../conf/afr.yaml" --plots_folder cifar/ --target adv_failures
      --duration_col adv_fit_time
    deps:
    - path: ../conf/afr.yaml
      hash: md5
      md5: cc0a815c8f97762789aa866cbca965a1
      size: 4839
    - path: cifar/clean.csv
      hash: md5
      md5: f11065790fb385b9ca6ab6a21bcb8ec2
      size: 9303640
    outs:
    - path: cifar/aft_comparison.csv
      hash: md5
      md5: 7937f8dadf6014c500f1d2dbe8a4667e
      size: 222
    - path: cifar/aft_comparison.tex
      hash: md5
      md5: e91a178018aed822009dcab8b5f021d4
      size: 464
    - path: cifar/cox_aft.pdf
      hash: md5
      md5: 2b104867799d5d81e85631ebfce97d5c
      size: 27629
    - path: cifar/cox_epochs_partial_effect.pdf
      hash: md5
      md5: 2fa44303d41d85eecf853c73af237964
      size: 33196
    - path: cifar/log_logistic_aft.pdf
      hash: md5
      md5: 8beba325eee8a048fd5686e2229eba5a
      size: 29564
    - path: cifar/log_logistic_epochs_partial_effect.pdf
      hash: md5
      md5: 8a42f97289cbdf877de5d03aaea8430c
      size: 27406
    - path: cifar/log_normal_aft.pdf
      hash: md5
      md5: 5057f14adb5267c38cc122479b68be89
      size: 31425
    - path: cifar/log_normal_epochs_partial_effect.pdf
      hash: md5
      md5: e96bb22de99c2250a5b5ceaa33c07833
      size: 28108
    - path: cifar/weibull_aft.pdf
      hash: md5
      md5: d29a9abfc96df07e6997feb33af45914
      size: 35731
    - path: cifar/weibull_epochs_partial_effect.pdf
      hash: md5
      md5: 93f769c88af555d2b836bafbe8581b84
      size: 26982
  combined_plots:
    cmd: python combined_plots.py
    deps:
    - path: cifar/aft_comparison.csv
      hash: md5
      md5: 7937f8dadf6014c500f1d2dbe8a4667e
      size: 222
    - path: cifar100/aft_comparison.csv
      hash: md5
      md5: 5df60e191c8da12d2a224fb299a8f0db
      size: 224
    - path: combined_plots.py
      hash: md5
      md5: 47a9e556a1562f6c4e5e14a32d198aee
      size: 7157
    - path: mnist/aft_comparison.csv
      hash: md5
      md5: f6c6d23811cfb68f894917dde8cce8ba
      size: 220
    outs:
    - path: combined/acc.pdf
      hash: md5
      md5: c13fce23b8b9965c83a62b2dd7fdab3e
      size: 33991
    - path: combined/cost.pdf
      hash: md5
      md5: 1d2fb91cef61a6ccea6d118723c27ebc
      size: 44266
    - path: combined/power.pdf
      hash: md5
      md5: 9a24e2ed20b223aad44739c7a83042f2
      size: 44335
    - path: combined/time.pdf
      hash: md5
      md5: bceacd2855762e4b980f56cccf153a85
      size: 44068
    - path: data/combined/combined.csv
      md5: 493c48e49102ccf2dcc55e6513c2d617
      size: 52354571
  combined_clean:
    cmd: python -m deckard.layers.clean_data --i data/combined/combined.csv --o combined/clean.csv
      --config "../conf/clean.yaml"
    deps:
    - path: ../conf/clean.yaml
      hash: md5
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 513
    - path: data/combined/combined.csv
      md5: 493c48e49102ccf2dcc55e6513c2d617
      size: 52354571
    params:
      ../conf/clean.yaml:
        attacks:
          FastGradientMethod: FGM
          ProjectedGradientDescent: PGD
          HopSkipJump: HSJ
          DeepFool: Deep
        defences:
          Control: Control
          FeatureSqueezing: FSQ
          Epochs: Epochs
          model_layers: Control
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
        params:
          FGM: attack.init.eps
          PGD: attack.init.eps
          HSJ: attack.init.eps
          DeepFool: attack.init.eps
          FSQ: model.art.preprocessor.bit_depth
          Control: model_layers
          Epochs: model.trainer.nb_epoch
          Batch_Size: model.trainer.batch_size
    outs:
    - path: combined/clean.csv
      hash: md5
      md5: f8eda4987668d731aca17c6ec412b78b
      size: 37117987
  combined_afr:
    cmd: python -m deckard.layers.afr --dataset Combined --data_file combined/clean.csv
      --config_file "../conf/combined_afr.yaml" --plots_folder combined/ --target
      adv_failures --duration_col adv_fit_time
    deps:
    - path: ../conf/combined_afr.yaml
      hash: md5
      md5: d724899bde46491fb98796cd3157160c
      size: 8010
    - path: combined/clean.csv
      hash: md5
      md5: f8eda4987668d731aca17c6ec412b78b
      size: 37117987
    outs:
    - path: combined/aft_comparison.csv
      hash: md5
      md5: b770f05cd675155dd258f1b3fe202112
      size: 206
    - path: combined/aft_comparison.tex
      hash: md5
      md5: 165feb5fa87aceda80335dd63043e94a
      size: 438
    - path: combined/log_logistic_aft.pdf
      hash: md5
      md5: 9257f957287245f5e26f25e19133748b
      size: 31678
    - path: combined/log_logistic_attack_eps_partial_effect.pdf
      hash: md5
      md5: c884e28a7264af8a92ffb6cfdd132188
      size: 27245
    - path: combined/log_logistic_batch_size_partial_effect.pdf
      hash: md5
      md5: ccec3a28db8e2cf6865a5c1661f56a84
      size: 29149
    - path: combined/log_logistic_epochs_partial_effect.pdf
      hash: md5
      md5: 45573b55844c840deda405d55831c64c
      size: 28238
    - path: combined/log_normal_aft.pdf
      hash: md5
      md5: a7ae52b828ad58645a67acd690eddb22
      size: 32549
    - path: combined/log_normal_attack_eps_partial_effect.pdf
      hash: md5
      md5: b6731a8f7268fec877d14ec21c099e01
      size: 28139
    - path: combined/log_normal_batch_size_partial_effect.pdf
      hash: md5
      md5: 10eb20e2e93e5a237b23aa59e0cf8e3d
      size: 30045
    - path: combined/log_normal_epochs_partial_effect.pdf
      hash: md5
      md5: 511c091b8525582abf6813e812407a15
      size: 29007
    - path: combined/weibull_aft.pdf
      hash: md5
      md5: 09a9e3382a32dc3f1bb990b585136212
      size: 36612
    - path: combined/weibull_attack_eps_partial_effect.pdf
      hash: md5
      md5: 09c6d5c8fba4ef9c170fab05ad41f386
      size: 26792
    - path: combined/weibull_batch_size_partial_effect.pdf
      hash: md5
      md5: 769e98abcb5160044e7cc81a6fc03ede
      size: 29021
    - path: combined/weibull_epochs_partial_effect.pdf
      hash: md5
      md5: a74e2b353a448f6a5c3d15b15e9539e3
      size: 28049
