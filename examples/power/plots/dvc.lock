schema: '2.0'
stages:
  merge@cifar100:
    cmd: python merge.py  --big_dir data/bit_depth/cifar100 --little_dir data/cifar100
      --config ../conf/afr.yaml --data_file power.csv --output_folder plots/cifar100/
      --output_file merged.csv
    deps:
    - path: ../conf/clean.yaml
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 538
    - path: data/bit_depth/cifar100/power.csv
      md5: d52080413e3ba7bd86ef8d92ebd00507
      size: 3988195
    - path: data/cifar100/power.csv
      md5: f51f0d4ebd105f64829af90a0212de00
      size: 16085014
    params:
      ../conf/clean.yaml:
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
    outs:
    - path: plots/cifar100/merged.csv
      md5: f2bf33451a3c6a27e8b37dafc2a30ace
      size: 20103676
  clean@cifar100:
    cmd: python -m deckard.layers.clean_data --i plots/cifar100/merged.csv --o plots/cifar100/clean.csv
      --config "../conf/clean.yaml"
    deps:
    - path: ../conf/clean.yaml
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 538
    - path: plots/cifar100/merged.csv
      md5: f2bf33451a3c6a27e8b37dafc2a30ace
      size: 20103676
    params:
      ../conf/clean.yaml:
        attacks:
          FastGradientMethod: FGM
          ProjectedGradientDescent: PGD
          HopSkipJump: HSJ
          DeepFool: Deep
        defences:
          Control: Control
          FeatureSqueezing: FSQ
          Epochs: Epochs
          model_layers: Control
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
        params:
          FGM: attack.init.eps
          PGD: attack.init.eps
          HSJ: attack.init.eps
          DeepFool: attack.init.eps
          FSQ: model.art.preprocessor.bit_depth
          Control: model_layers
          Epochs: model.trainer.nb_epoch
          Batch_Size: model.trainer.batch_size
    outs:
    - path: plots/cifar100/clean.csv
      md5: 697750ab677d3969845ee84dc0c12a22
      size: 9261307
  afr@cifar100:
    cmd: python -m deckard.layers.afr --dataset cifar100 --data_file plots/cifar100/clean.csv
      --config_file "../conf/afr.yaml" --plots_folder plots/cifar100/ --target adv_failures
      --duration_col adv_fit_time
    deps:
    - path: ../conf/afr.yaml
      md5: ba48c8059bc4d6b9822853c6b923c764
      size: 4853
    - path: plots/cifar100/clean.csv
      md5: 697750ab677d3969845ee84dc0c12a22
      size: 9261307
    outs:
    - path: plots/cifar100/aft_comparison.csv
      md5: 3af00791562aea95acc6857504a8d6a3
      size: 465
    - path: plots/cifar100/aft_comparison.tex
      md5: 34272f06716f4853d4e43e25103d6a37
      size: 681
    - path: plots/cifar100/cox_aft.pdf
      md5: 541f6d1ab36a76f922703284635478da
      size: 20683
    - path: plots/cifar100/cox_epochs_partial_effect.pdf
      md5: 4d095777f3f3058bbd78513adcd0d942
      size: 32509
    - path: plots/cifar100/log_logistic_aft.pdf
      md5: c4f24a6186191fdc221a99a931e8b02c
      size: 22688
    - path: plots/cifar100/log_logistic_epochs_partial_effect.pdf
      md5: 1b72dcb1fad4eb8fc39837a51858e7af
      size: 27428
    - path: plots/cifar100/log_normal_aft.pdf
      md5: 3fb7329d26bd6b6cdd2bcb11275ff597
      size: 23091
    - path: plots/cifar100/log_normal_epochs_partial_effect.pdf
      md5: 60c3322a25fb54b58bf878eeaa1f573a
      size: 28269
    - path: plots/cifar100/weibull_aft.pdf
      md5: 2953f8fbde0fdeeac933409cafa5249d
      size: 29752
    - path: plots/cifar100/weibull_epochs_partial_effect.pdf
      md5: 70657c85b91844a8cf32c20a019f14d1
      size: 27176
  merge@cifar:
    cmd: python merge.py  --big_dir data/bit_depth/cifar --little_dir data/cifar --config
      ../conf/afr.yaml --data_file power.csv --output_folder plots/cifar/ --output_file
      merged.csv
    deps:
    - path: ../conf/clean.yaml
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 538
    - path: data/bit_depth/cifar/power.csv
      md5: b9ebbe01b2bd93f1c4af02fb8abd910b
      size: 5292031
    - path: data/cifar/power.csv
      md5: a8e056a8c4008ce37006237f2e44b2bf
      size: 9999301
    params:
      ../conf/clean.yaml:
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
    outs:
    - path: plots/cifar/merged.csv
      md5: 2d2cbcb913a61d304950c910bd487b9b
      size: 15307632
  merge@mnist:
    cmd: python merge.py  --big_dir data/bit_depth/mnist --little_dir data/mnist --config
      ../conf/afr.yaml --data_file power.csv --output_folder plots/mnist/ --output_file
      merged.csv
    deps:
    - path: ../conf/clean.yaml
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 538
    - path: data/bit_depth/mnist/power.csv
      md5: ed40bca679961759527ca94ca4cbd984
      size: 5422584
    - path: data/mnist/power.csv
      md5: 6c84e8e91d81504e86db933bab0e9ae2
      size: 9970090
    params:
      ../conf/clean.yaml:
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
    outs:
    - path: plots/mnist/merged.csv
      md5: 8f227012f75f50d6f01745b54d2dc5a5
      size: 15411588
  clean@mnist:
    cmd: python -m deckard.layers.clean_data --i plots/mnist/merged.csv --o plots/mnist/clean.csv
      --config "../conf/clean.yaml"
    deps:
    - path: ../conf/clean.yaml
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 538
    - path: plots/mnist/merged.csv
      md5: 8f227012f75f50d6f01745b54d2dc5a5
      size: 15411588
    params:
      ../conf/clean.yaml:
        attacks:
          FastGradientMethod: FGM
          ProjectedGradientDescent: PGD
          HopSkipJump: HSJ
          DeepFool: Deep
        defences:
          Control: Control
          FeatureSqueezing: FSQ
          Epochs: Epochs
          model_layers: Control
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
        params:
          FGM: attack.init.eps
          PGD: attack.init.eps
          HSJ: attack.init.eps
          DeepFool: attack.init.eps
          FSQ: model.art.preprocessor.bit_depth
          Control: model_layers
          Epochs: model.trainer.nb_epoch
          Batch_Size: model.trainer.batch_size
    outs:
    - path: plots/mnist/clean.csv
      md5: 1cb59603927ff95aaceccdd3425feadb
      size: 9236530
  afr@mnist:
    cmd: python -m deckard.layers.afr --dataset mnist --data_file plots/mnist/clean.csv
      --config_file "../conf/afr.yaml" --plots_folder plots/mnist/ --target adv_failures
      --duration_col adv_fit_time
    deps:
    - path: ../conf/afr.yaml
      md5: ba48c8059bc4d6b9822853c6b923c764
      size: 4853
    - path: plots/mnist/clean.csv
      md5: 1cb59603927ff95aaceccdd3425feadb
      size: 9236530
    outs:
    - path: plots/mnist/aft_comparison.csv
      md5: de519adac05bb1c1d97599656e9c7b22
      size: 466
    - path: plots/mnist/aft_comparison.tex
      md5: e9d0235d6761e11914d4fa7451f8ba7b
      size: 675
    - path: plots/mnist/cox_aft.pdf
      md5: 3d0d011c8e6e406e21b717ffdaf6536d
      size: 20317
    - path: plots/mnist/cox_epochs_partial_effect.pdf
      md5: ff624f52f5270751a40b6ae46ac6a094
      size: 31744
    - path: plots/mnist/log_logistic_aft.pdf
      md5: 53905f954e86a007b85b48edaa237c31
      size: 22750
    - path: plots/mnist/log_logistic_epochs_partial_effect.pdf
      md5: 81c56575f5e5f77465faea7b13a24486
      size: 27423
    - path: plots/mnist/log_normal_aft.pdf
      md5: a3035ba654305bc1c242b3e81290ea4d
      size: 23155
    - path: plots/mnist/log_normal_epochs_partial_effect.pdf
      md5: 38ec8e960f4429de53da463da2638e40
      size: 28313
    - path: plots/mnist/weibull_aft.pdf
      md5: 3245c7814e6a734642e11046243994e9
      size: 29797
    - path: plots/mnist/weibull_epochs_partial_effect.pdf
      md5: e9715946b06c1c1d9bec5b76d30b8622
      size: 27068
  clean@cifar:
    cmd: python -m deckard.layers.clean_data --i plots/cifar/merged.csv --o plots/cifar/clean.csv
      --config "../conf/clean.yaml"
    deps:
    - path: ../conf/clean.yaml
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 538
    - path: plots/cifar/merged.csv
      md5: 2d2cbcb913a61d304950c910bd487b9b
      size: 15307632
    params:
      ../conf/clean.yaml:
        attacks:
          FastGradientMethod: FGM
          ProjectedGradientDescent: PGD
          HopSkipJump: HSJ
          DeepFool: Deep
        defences:
          Control: Control
          FeatureSqueezing: FSQ
          Epochs: Epochs
          model_layers: Control
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
        params:
          FGM: attack.init.eps
          PGD: attack.init.eps
          HSJ: attack.init.eps
          DeepFool: attack.init.eps
          FSQ: model.art.preprocessor.bit_depth
          Control: model_layers
          Epochs: model.trainer.nb_epoch
          Batch_Size: model.trainer.batch_size
    outs:
    - path: plots/cifar/clean.csv
      md5: 747305ca7d3e92c73c92985a35c5e664
      size: 9247427
  afr@cifar:
    cmd: python -m deckard.layers.afr --dataset cifar --data_file plots/cifar/clean.csv
      --config_file "../conf/afr.yaml" --plots_folder plots/cifar/ --target adv_failures
      --duration_col adv_fit_time
    deps:
    - path: ../conf/afr.yaml
      md5: ba48c8059bc4d6b9822853c6b923c764
      size: 4853
    - path: plots/cifar/clean.csv
      md5: 747305ca7d3e92c73c92985a35c5e664
      size: 9247427
    outs:
    - path: plots/cifar/aft_comparison.csv
      md5: 4bc7aa6c0459bcf73d4dea6474085b39
      size: 462
    - path: plots/cifar/aft_comparison.tex
      md5: b11c4e3119a67789a2e2a02dce05d1ed
      size: 675
    - path: plots/cifar/cox_aft.pdf
      md5: dbd2bc33ddb8a9c244e4054c7096f8b3
      size: 20691
    - path: plots/cifar/cox_epochs_partial_effect.pdf
      md5: d3b2390367df0a2e591b07712c9c69fc
      size: 32672
    - path: plots/cifar/log_logistic_aft.pdf
      md5: 3c178d071eb728dcbb041349f0f6cd05
      size: 22399
    - path: plots/cifar/log_logistic_epochs_partial_effect.pdf
      md5: 5b4f2fd197a17c0cc81648322dd3edfa
      size: 27909
    - path: plots/cifar/log_normal_aft.pdf
      md5: c9f10cee72a88b33d06bdc983945e61c
      size: 23492
    - path: plots/cifar/log_normal_epochs_partial_effect.pdf
      md5: c6354f4dcfca4e6d3cb09a4cda1862c7
      size: 28673
    - path: plots/cifar/weibull_aft.pdf
      md5: b930bdf51394fa4182a9ceddd6452bcd
      size: 29449
    - path: plots/cifar/weibull_epochs_partial_effect.pdf
      md5: ad5920a2dd199ef30dec2ee01d60c296
      size: 27534
  combined_plots:
    cmd: python combined_plots.py
    deps:
    - path: combined_plots.py
      md5: 4fadfe07d2fc51e1c5edb694d4e92866
      size: 7438
    - path: plots/cifar/aft_comparison.csv
      md5: 4bc7aa6c0459bcf73d4dea6474085b39
      size: 462
    - path: plots/cifar100/aft_comparison.csv
      md5: 3af00791562aea95acc6857504a8d6a3
      size: 465
    - path: plots/mnist/aft_comparison.csv
      md5: de519adac05bb1c1d97599656e9c7b22
      size: 466
    outs:
    - path: data/combined/combined.csv
      md5: 493c48e49102ccf2dcc55e6513c2d617
      size: 52364568
    - path: plots/combined/acc.pdf
      md5: cf612187ee4fc7c1f81edbff3766aa9b
      size: 32490
    - path: plots/combined/cost.pdf
      md5: 4ef2481be399e11a8c7e36ffda8f99ca
      size: 41752
    - path: plots/combined/power.pdf
      md5: 50e3a38e3bc0c8d83758f5cd0ff79f84
      size: 41605
    - path: plots/combined/time.pdf
      md5: c14c9557c84dab0b7f972803d50d52ba
      size: 41600
  combined_clean:
    cmd: python -m deckard.layers.clean_data --i data/combined/combined.csv --o plots/combined/clean.csv
      --config "../conf/clean.yaml"
    deps:
    - path: ../conf/clean.yaml
      md5: 3b23a3d656ad56e49e69f8624e227852
      size: 538
    - path: data/combined/combined.csv
      md5: 493c48e49102ccf2dcc55e6513c2d617
      size: 52364568
    params:
      ../conf/clean.yaml:
        attacks:
          FastGradientMethod: FGM
          ProjectedGradientDescent: PGD
          HopSkipJump: HSJ
          DeepFool: Deep
        defences:
          Control: Control
          FeatureSqueezing: FSQ
          Epochs: Epochs
          model_layers: Control
        fillna:
          Epochs: 20
          FGM: 0.0
          FSQ: 32
          Control: 18
          Batch_Size: 1024
        params:
          FGM: attack.init.eps
          PGD: attack.init.eps
          HSJ: attack.init.eps
          DeepFool: attack.init.eps
          FSQ: model.art.preprocessor.bit_depth
          Control: model_layers
          Epochs: model.trainer.nb_epoch
          Batch_Size: model.trainer.batch_size
    outs:
    - path: plots/combined/clean.csv
      md5: 65e04fe33bd6a5a4607236b0a48340c7
      size: 13643214
  combined_afr:
    cmd: python -m deckard.layers.afr --dataset Combined --data_file plots/combined/clean.csv
      --config_file "../conf/combined_afr.yaml" --plots_folder plots/combined/ --target
      adv_failures --duration_col adv_fit_time
    deps:
    - path: ../conf/combined_afr.yaml
      md5: 26e5e54acb8aec5ef5c1eb10d0e38184
      size: 11134
    - path: plots/combined/clean.csv
      md5: 65e04fe33bd6a5a4607236b0a48340c7
      size: 13643214
    outs:
    - path: plots/combined/aft_comparison.csv
      md5: e74ba56582be7132de90ba39cdd3f739
      size: 473
    - path: plots/combined/aft_comparison.tex
      md5: 8f7d034613f99e5a508ead54b6d3d72c
      size: 681
    - path: plots/combined/cox_aft.pdf
      md5: 8331a07b824a6d17f659f60ffb1c2801
      size: 20681
    - path: plots/combined/cox_attack_eps_partial_effect.pdf
      md5: db3edc9c18f90e52b8899b3514d4d1ae
      size: 35669
    - path: plots/combined/cox_batch_size_partial_effect.pdf
      md5: eca28da18f398d997c3a28191f1c629e
      size: 39577
    - path: plots/combined/cox_epochs_partial_effect.pdf
      md5: 4530df08dc3b86727fc93e68e850a872
      size: 38326
    - path: plots/combined/cox_predict_time_partial_effect.pdf
      md5: f49e41ff7406f126ecf3b9fbad8c1e25
      size: 35320
    - path: plots/combined/cox_train_time_partial_effect.pdf
      md5: 382f0b19a041e8309189f63f3057d87b
      size: 35794
    - path: plots/combined/log_logistic_aft.pdf
      md5: d2244674d38f9d4264e8cee091e0bb5b
      size: 22601
    - path: plots/combined/log_logistic_attack_eps_partial_effect.pdf
      md5: cea58b47c36202c29c502ccfaf68a29e
      size: 27073
    - path: plots/combined/log_logistic_batch_size_partial_effect.pdf
      md5: a3250c94e62ddb0c5b7be13a4059b28e
      size: 28670
    - path: plots/combined/log_logistic_epochs_partial_effect.pdf
      md5: 3ab17da8b1bebebb1a78bb4f6b51f847
      size: 28167
    - path: plots/combined/log_logistic_predict_time_partial_effect.pdf
      md5: abcf0faef965b76241ae7c27714915a6
      size: 26733
    - path: plots/combined/log_logistic_train_time_partial_effect.pdf
      md5: ac17b1d2a019a96b97b083c01c42c627
      size: 24710
    - path: plots/combined/log_normal_aft.pdf
      md5: 10e0e03ea459d6fd3186d4f5a04e7e4c
      size: 23191
    - path: plots/combined/log_normal_attack_eps_partial_effect.pdf
      md5: 76d7ca7e1282659a5e025b494df8ddf4
      size: 27791
    - path: plots/combined/log_normal_batch_size_partial_effect.pdf
      md5: 828cc059ca267e68929750c401f4e393
      size: 29786
    - path: plots/combined/log_normal_epochs_partial_effect.pdf
      md5: 7612c12795a4c1e1196a63f180eaa46f
      size: 29076
    - path: plots/combined/log_normal_predict_time_partial_effect.pdf
      md5: 271102c4f7b0f7db05dcff4382be61db
      size: 27465
    - path: plots/combined/log_normal_train_time_partial_effect.pdf
      md5: 73deaf8666f7277809c29b33382e0b20
      size: 25972
    - path: plots/combined/weibull_aft.pdf
      md5: 1f23952c7a4ea97ecd39b489e32e017f
      size: 29658
    - path: plots/combined/weibull_attack_eps_partial_effect.pdf
      md5: 9b95a846244858f4c5f401fa7b73e535
      size: 26856
    - path: plots/combined/weibull_batch_size_partial_effect.pdf
      md5: 87137c44ba2a7080c054d0ebb8be5c73
      size: 28814
    - path: plots/combined/weibull_epochs_partial_effect.pdf
      md5: 83299fd58a523139425b7d9863ce3ff3
      size: 28053
    - path: plots/combined/weibull_predict_time_partial_effect.pdf
      md5: 5ef04caefd298d3bd9c253fe76588867
      size: 26524
    - path: plots/combined/weibull_train_time_partial_effect.pdf
      md5: 8210a64e4e764d8aa43342663f262edd
      size: 24804
