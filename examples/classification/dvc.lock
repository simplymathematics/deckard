schema: '2.0'
stages:
  print:
    cmd: cat params.yaml
  generate_data:
    cmd: python -m deckard.layers.runner generate_data
    deps:
    - path: params.yaml
      md5: c1c977c0ef4c96da1aad23d10f487309
      size: 1717
    params:
      params.yaml:
        data:
          generate:
            class_sep: 1
            n_classes: 2
            n_features: 100
            n_informative: 99
            n_redundant: 0
            n_repeated: 0
            n_samples: 101000
          name: classification
          sample:
            random_state: 42
            shuffle: true
            stratify: true
            test_size: 1000
            time_series: true
            train_size: 1000
        files:
          attack_file: attack/6bc16f621427375278e59654f3d997f3.pkl
          attack_predictions_file: attack_predictions.json
          attack_probabilities_file: attack_probabilities.json
          attack_samples_file: samples.json
          attack_score_dict_file: attack_scores.json
          attack_time_dict_file: attack_time_dict.json
          data_file: data/ad5713b7391bfb03f94e026cc3cf6421.npz
          ground_truth_file: ground_truth.json
          model_file: models/e3e79e8b49f531ee566f7f31ae211f64.pkl
          params_file: params.json
          path: be8a84048824e17fb4fd00169e0c1fb2
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          score_dict_file: scores.json
          time_dict_file: time_dict.json
    outs:
    - path: data/ad5713b7391bfb03f94e026cc3cf6421.npz
      md5: fa57c92f194c614aff8d55f73ad19563
      size: 80800393
    - path: reports/generate_data/be8a84048824e17fb4fd00169e0c1fb2/ground_truth.json
      md5: 2d29796c3fd00fee4921449aab589828
      size: 978891
  train:
    cmd: python -m deckard.layers.runner train
    deps:
    - path: data/ad5713b7391bfb03f94e026cc3cf6421.npz
      md5: fa57c92f194c614aff8d55f73ad19563
      size: 80800393
    params:
      params.yaml:
        data:
          generate:
            class_sep: 1
            n_classes: 2
            n_features: 100
            n_informative: 99
            n_redundant: 0
            n_repeated: 0
            n_samples: 101000
          name: classification
          sample:
            random_state: 42
            shuffle: true
            stratify: true
            test_size: 1000
            time_series: true
            train_size: 1000
        files:
          attack_file: attack/6bc16f621427375278e59654f3d997f3.pkl
          attack_predictions_file: attack_predictions.json
          attack_probabilities_file: attack_probabilities.json
          attack_samples_file: samples.json
          attack_score_dict_file: attack_scores.json
          attack_time_dict_file: attack_time_dict.json
          data_file: data/ad5713b7391bfb03f94e026cc3cf6421.npz
          ground_truth_file: ground_truth.json
          model_file: models/e3e79e8b49f531ee566f7f31ae211f64.pkl
          params_file: params.json
          path: be8a84048824e17fb4fd00169e0c1fb2
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        model.init:
          C: 1
          degree: 1
          kernel: linear
          max_iter: 1000
          name: sklearn.svm.SVC
          probability: true
        scorers:
          accuracy:
            name: sklearn.metrics.accuracy_score
            normalize: true
          f1:
            average: weighted
            name: sklearn.metrics.f1_score
          precision:
            average: weighted
            name: sklearn.metrics.precision_score
          recall:
            average: weighted
            name: sklearn.metrics.recall_score
    outs:
    - path: reports/train/be8a84048824e17fb4fd00169e0c1fb2/params.json
      md5: e9ed96f884b064e2f69fdf8f8298252c
      size: 1421
    - path: reports/train/be8a84048824e17fb4fd00169e0c1fb2/predictions.json
      md5: 50464838fd620d823f1171f18dd8db04
      size: 978891
    - path: reports/train/be8a84048824e17fb4fd00169e0c1fb2/probabilities.json
      md5: 50464838fd620d823f1171f18dd8db04
      size: 978891
    - path: reports/train/be8a84048824e17fb4fd00169e0c1fb2/scores.json
      md5: 1584e5e6e2f63a5e729f8c579ccef807
      size: 89
    - path: reports/train/be8a84048824e17fb4fd00169e0c1fb2/time_dict.json
      md5: 065e0a76e496666fb39e5fa9725fcbb2
      size: 113
  sklearn_pipeline:
    cmd: python -m deckard.layers.train sklearn_pipeline
    deps:
    - path: train/data
      md5: e7ca9a385cb984848ac3786d1576a3b3.dir
      size: 8120393
      nfiles: 1
    - path: train/model
      md5: f8b2bbf0d9f6fdceb12e5e49ed3a0a0e.dir
      size: 6744
      nfiles: 2
    params:
      params.yaml:
        data:
          files:
            data_filetype: pickle
            data_path: data
          generate:
            n_classes: 3
            n_features: 100
            n_informative: 4
            n_redundant: 1
            n_samples: 10000
            n_clusters_per_class: 1
          name:
          - classification
          sample:
            random_state: 42
            shuffle: true
            stratify: true
            time_series: true
            train_size: 8000
        files:
          ground_truth_file: ground_truth.json
          params_file: params.json
          path: reports
          predictions_file: predictions.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        model.files:
          model_filetype: pickle
          model_path: model
        model.init:
          loss: log
          name: sklearn.linear_model.SGDClassifier
        model.sklearn_pipeline:
          sklearn.feature_selection.SelectKBest:
            k: 50
        plots:
          balance: balance
          classification: classification
          confusion: confusion
          correlation: correlation
          radviz: radviz
          rank: rank
        scorers:
          accuracy:
            name: sklearn.metrics.accuracy_score
            normalize: true
          f1:
            average: weighted
            name: sklearn.metrics.f1_score
          precision:
            average: weighted
            name: sklearn.metrics.precision_score
          recall:
            average: weighted
            name: sklearn.metrics.recall_score
  attack:
    cmd: python -m deckard.layers.runner attack
    deps:
    - path: data/ad5713b7391bfb03f94e026cc3cf6421.npz
      md5: 63ef9df09ea3ad6c68fd107d5954a468
      size: 891312
    - path: reports/train/be8a84048824e17fb4fd00169e0c1fb2/params.json
      md5: e9ed96f884b064e2f69fdf8f8298252c
      size: 1421
    params:
      params.yaml:
        attack:
          generate:
            attack_size: 100
          init:
            batch_size: 32
            eps: 0.01
            eps_step: 0.001
            max_iter: 1
            name: art.attacks.evasion.ProjectedGradientDescent
        data:
          generate:
            class_sep: 1
            n_classes: 2
            n_features: 100
            n_informative: 99
            n_redundant: 0
            n_repeated: 0
            n_samples: 101000
          name: classification
          sample:
            random_state: 42
            shuffle: true
            stratify: true
            test_size: 1000
            time_series: true
            train_size: 1000
        files:
          attack_file: attack/6bc16f621427375278e59654f3d997f3.pkl
          attack_predictions_file: attack_predictions.json
          attack_probabilities_file: attack_probabilities.json
          attack_samples_file: samples.json
          attack_score_dict_file: attack_scores.json
          attack_time_dict_file: attack_time_dict.json
          data_file: data/ad5713b7391bfb03f94e026cc3cf6421.npz
          ground_truth_file: ground_truth.json
          model_file: models/e3e79e8b49f531ee566f7f31ae211f64.pkl
          params_file: params.json
          path: be8a84048824e17fb4fd00169e0c1fb2
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        model.init:
          C: 1
          degree: 1
          kernel: linear
          max_iter: 1000
          name: sklearn.svm.SVC
          probability: true
        scorers:
          accuracy:
            name: sklearn.metrics.accuracy_score
            normalize: true
          f1:
            average: weighted
            name: sklearn.metrics.f1_score
          precision:
            average: weighted
            name: sklearn.metrics.precision_score
          recall:
            average: weighted
            name: sklearn.metrics.recall_score
    outs:
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/attack_predictions.json
      md5: afa3e60035ce65d71084231be65667da
      size: 697
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/attack_probabilities.json
      md5: 59defb8735b3ddcc579677dfe16e6c18
      size: 3497
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/attack_scores.json
      md5: 44f67e5d4ccdea25dc95fe3476e0cea5
      size: 175
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/attack_time_dict.json
      md5: 11c52eb583b21623b7e5e8278f3870c0
      size: 100
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/params.json
      md5: 893005ece9eb9b51802d036f232bad8a
      size: 1572
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/predictions.json
      md5: 50464838fd620d823f1171f18dd8db04
      size: 978891
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/probabilities.json
      md5: 50464838fd620d823f1171f18dd8db04
      size: 978891
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/samples.json
      md5: 15eea99bdaca5b1e0e8d73e589f2a17f
      size: 184378
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/scores.json
      md5: 1584e5e6e2f63a5e729f8c579ccef807
      size: 89
    - path: reports/attack/be8a84048824e17fb4fd00169e0c1fb2/time_dict.json
      md5: e37c1930ba0d45eafcca29081365ecb4
      size: 114
  train@sigmoid:
    cmd: python -m deckard.layers.runner train@sigmoid
    deps:
    - path: generate_data/data/4b1101225624b2cd491acdbf10bbf2f9.pickle
      md5: 756db574e4c4cfcdf4c585d69abcf47b
      size: 7391
    params:
      params.yaml:
        data:
          generate:
            class_sep: 1
            n_classes: 2
            n_features: 10
            n_informative: 9
            n_redundant: 0
            n_repeated: 0
            n_samples: 100
          name:
          - classification
          sample:
            random_state: 42
            shuffle: true
            stratify: true
            time_series: true
            train_size: 0.8
        files:
          data_file: data/4b1101225624b2cd491acdbf10bbf2f9.pickle
          ground_truth_file: ground_truth.json
          model_file: model/23de12c657f6d021dd9602e7aeb95b8f.pickle
          params_file: params.json
          path: 89f75bf6df8dbc8072198a68f2a704c3
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        model.init.sigmoid:
          C: 1
          coef0: 1
          gamma: auto
          kernel: sigmoid
          name: sklearn.svm.SVC
        scorers:
          accuracy:
            name: sklearn.metrics.accuracy_score
            normalize: true
          f1:
            average: weighted
            name: sklearn.metrics.f1_score
          precision:
            average: weighted
            name: sklearn.metrics.precision_score
          recall:
            average: weighted
            name: sklearn.metrics.recall_score
  train@linear:
    cmd: python -m deckard.layers.runner train@linear
    deps:
    - path: generate_data/data/4b1101225624b2cd491acdbf10bbf2f9.pickle
      md5: 756db574e4c4cfcdf4c585d69abcf47b
      size: 7391
    params:
      params.yaml:
        data:
          generate:
            class_sep: 1
            n_classes: 2
            n_features: 10
            n_informative: 9
            n_redundant: 0
            n_repeated: 0
            n_samples: 100
          name:
          - classification
          sample:
            random_state: 42
            shuffle: true
            stratify: true
            time_series: true
            train_size: 0.8
        files:
          data_file: data/4b1101225624b2cd491acdbf10bbf2f9.pickle
          ground_truth_file: ground_truth.json
          model_file: model/23de12c657f6d021dd9602e7aeb95b8f.pickle
          params_file: params.json
          path: 89f75bf6df8dbc8072198a68f2a704c3
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        model.init.linear:
          C: 1
          kernel: linear
          name: sklearn.svm.SVC
        scorers:
          accuracy:
            name: sklearn.metrics.accuracy_score
            normalize: true
          f1:
            average: weighted
            name: sklearn.metrics.f1_score
          precision:
            average: weighted
            name: sklearn.metrics.precision_score
          recall:
            average: weighted
            name: sklearn.metrics.recall_score
  train@poly:
    cmd: python -m deckard.layers.runner train@poly
    deps:
    - path: generate_data/data/4b1101225624b2cd491acdbf10bbf2f9.pickle
      md5: 756db574e4c4cfcdf4c585d69abcf47b
      size: 7391
    params:
      params.yaml:
        data:
          generate:
            class_sep: 1
            n_classes: 2
            n_features: 10
            n_informative: 9
            n_redundant: 0
            n_repeated: 0
            n_samples: 100
          name:
          - classification
          sample:
            random_state: 42
            shuffle: true
            stratify: true
            time_series: true
            train_size: 0.8
        files:
          data_file: data/4b1101225624b2cd491acdbf10bbf2f9.pickle
          ground_truth_file: ground_truth.json
          model_file: model/23de12c657f6d021dd9602e7aeb95b8f.pickle
          params_file: params.json
          path: 89f75bf6df8dbc8072198a68f2a704c3
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        model.init.poly:
          C: 1
          coef0: 1
          degree: 2
          gamma: auto
          kernel: poly
          name: sklearn.svm.SVC
        scorers:
          accuracy:
            name: sklearn.metrics.accuracy_score
            normalize: true
          f1:
            average: weighted
            name: sklearn.metrics.f1_score
          precision:
            average: weighted
            name: sklearn.metrics.precision_score
          recall:
            average: weighted
            name: sklearn.metrics.recall_score
  generate_data@ten_thousand_features:
    cmd: python -m deckard.layers.runner generate_data@ten_thousand_features
    deps:
    - path: params.yaml
      md5: 2b2cd5d03f6fcdf4327f5e746cffa4cf
      size: 2130
    params:
      params.yaml:
        data.generate.ten_thousand_features:
          n_classes: 2
          n_features: 10000
          n_informative: 9999
          n_samples: 100
        files:
          data_file: data/3f7ed61b1a5891ff70cb6604bc5e6bd1.pickle
          ground_truth_file: ground_truth.json
          model_file: model/f22bb8a5fef3f4d620464f9ac666ff4e.pickle
          params_file: params.json
          path: 2cf65b96cfe0c8903003d666f11bb114
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
  generate_data@one_hundred_features:
    cmd: python -m deckard.layers.runner generate_data@one_hundred_features
    deps:
    - path: params.yaml
      md5: 1d5d956df69d4012d38b685a3f67b269
      size: 2118
    params:
      params.yaml:
        data.generate.one_hundred_features:
          n_classes: 2
          n_features: 100
          n_informative: 99
          n_samples: 100000
          n_repeated: 0
          n_redundant: 0
          class_sep: 1
        data.name: classification
  generate_data@one_thousand_features:
    cmd: python -m deckard.layers.runner generate_data@one_thousand_features
    deps:
    - path: params.yaml
      md5: 1d5d956df69d4012d38b685a3f67b269
      size: 2118
    params:
      params.yaml:
        data.generate.one_thousand_features:
          n_classes: 2
          n_features: 1000
          n_informative: 999
          n_samples: 100000
          n_repeated: 0
          n_redundant: 0
          class_sep: 1
        data.name: classification
  generate_data@one_hundred_thousand_features:
    cmd: python -m deckard.layers.runner generate_data@one_hundred_thousand_features
    deps:
    - path: params.yaml
      md5: 1d5d956df69d4012d38b685a3f67b269
      size: 2118
    params:
      params.yaml:
        data.generate.one_hundred_thousand_features:
          n_classes: 2
          n_features: 100000
          n_informative: 99999
          n_samples: 100000
        files:
          data_file: data/8844be495f5ac531a307edf0d0018f4c.pickle
          ground_truth_file: ground_truth.json
          model_file: model/bcf8dd16efee6bccdd9de3e10951b36f.pickle
          params_file: params.json
          path: ccff0abf18147ed8b82c5d7776ce131d
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
  generate_data@ten_features:
    cmd: python -m deckard.layers.runner generate_data@ten_features
    deps:
    - path: params.yaml
      md5: 1d5d956df69d4012d38b685a3f67b269
      size: 2118
    params:
      params.yaml:
        data.name: classification
  data_generate_@one_thousand_features:
    cmd: python -m deckard.layers.runner data_generate_@one_thousand_features
    deps:
    - path: params.yaml
      md5: 2b2cd5d03f6fcdf4327f5e746cffa4cf
      size: 2130
    params:
      params.yaml:
        data.generate.one_thousand_features.n_features: 1000
        files:
          data_file: data/3f7ed61b1a5891ff70cb6604bc5e6bd1.pickle
          ground_truth_file: ground_truth.json
          model_file: model/f22bb8a5fef3f4d620464f9ac666ff4e.pickle
          params_file: params.json
          path: 2cf65b96cfe0c8903003d666f11bb114
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
  data_generate@one_hundred:
    cmd: python -m deckard.layers.runner data_generate@one_hundred
    deps:
    - path: params.yaml
      md5: 5499f8506cb1a7dde2c7a27e81f9f626
      size: 1260
    params:
      params.yaml:
        data.generate:
          class_sep: 1
          n_classes: 2
          n_features: 10
          n_informative: 9
          n_redundant: 0
          n_repeated: 0
          n_samples: 100
        data.name:
        - classification
        files:
          data_file: data/4b1101225624b2cd491acdbf10bbf2f9.pickle
          ground_truth_file: ground_truth.json
          model_file: model/c552e4f2b16431c8fa16fbb903c21434.pickle
          params_file: params.json
          path: 1f7b44460ac68826b244491382179f51
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
    outs:
    - path: data_generate/one_hundred/data/4b1101225624b2cd491acdbf10bbf2f9.pickle
      md5: 3d737f2f92397b56c5c65b21654e5aa0
      size: 7395
  data_generate@one_thousand:
    cmd: python -m deckard.layers.runner data_generate@one_thousand
    deps:
    - path: params.yaml
      md5: 5499f8506cb1a7dde2c7a27e81f9f626
      size: 1260
    params:
      params.yaml:
        data.generate:
          class_sep: 1
          n_classes: 2
          n_features: 10
          n_informative: 9
          n_redundant: 0
          n_repeated: 0
          n_samples: 100
        data.name:
        - classification
        files:
          data_file: data/4b1101225624b2cd491acdbf10bbf2f9.pickle
          ground_truth_file: ground_truth.json
          model_file: model/c552e4f2b16431c8fa16fbb903c21434.pickle
          params_file: params.json
          path: 1f7b44460ac68826b244491382179f51
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
    outs:
    - path: data_generate/one_thousand/data/4b1101225624b2cd491acdbf10bbf2f9.pickle
      md5: 4720d0e404af18789f19b34186841e7f
      size: 7395
  model_queue:
    cmd: bash experiments.sh
    deps:
    - path: attack/
      md5: 20b5c490ad1b441aee705ebdbd5d6630.dir
      size: 80878144
      nfiles: 2
    outs:
    - path: model_queue/
      md5: db0bbb3542d7ebdfdb998e203776fa48.dir
      size: 9401308
      nfiles: 66
  retrain:
    cmd: python -m deckard.layers.runner retrain
    deps:
    - path: attack/
      md5: dffffe1a6d9592044b5727be1ad91fb6.dir
      size: 80800402
      nfiles: 1
    params:
      params.yaml:
        attack:
          generate:
            attack_size: 100
          init:
            batch_size: 32
            eps: 0.01
            eps_step: 0.001
            max_iter: 1
            name: art.attacks.evasion.ProjectedGradientDescent
        data:
          generate:
            class_sep: 1
            n_classes: 2
            n_features: 100
            n_informative: 99
            n_redundant: 0
            n_repeated: 0
            n_samples: 101000
          name:
          - classification
          sample:
            random_state: 42
            shuffle: true
            stratify: true
            test_size: 1000
            time_series: true
            train_size: 10000
        files:
          data_file: data/1332ceae94be76b20525d9dbb1b61dc8.pickle
          ground_truth_file: ground_truth.json
          model_file: model/a44064d36f3aba6afaceef4173c37c04.pickle
          params_file: params.json
          path: 57a1a9bb727817c33da447ee6c08c215
          predictions_file: predictions.json
          probabilities_file: probabilities.json
          reports: reports
          samples_file: samples.json
          score_dict_file: scores.json
          time_dict_file: time_dict.json
        model:
          art_pipeline:
            trainer_defence:
              name: art.defences.trainer.AdversarialTrainer
              ratio: 0.5
          init:
            C: 1.0
            coef0: 1
            degree: 2
            gamma: auto
            kernel: poly
            max_iter: 1000
            name: sklearn.svm.SVC
            probability: true
          sklearn_pipeline:
            feature_selection:
              name: sklearn.preprocessing.StandardScaler
              with_mean: true
              with_std: true
        scorers:
          accuracy:
            name: sklearn.metrics.accuracy_score
            normalize: true
          f1:
            average: weighted
            name: sklearn.metrics.f1_score
          precision:
            average: weighted
            name: sklearn.metrics.precision_score
          recall:
            average: weighted
            name: sklearn.metrics.recall_score
    outs:
    - path: retrain/
      md5: 2dedc2e18b31e2f9112e9c607f7956cd.dir
      size: 80800406
      nfiles: 1
